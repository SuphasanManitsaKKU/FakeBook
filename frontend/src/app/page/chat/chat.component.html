<div class="flex flex-col md:flex-row gap-4 min-h-screen max-h-screen p-4">
    <!-- Friends List -->
    <div class="w-full md:w-1/4 bg-gray-100 p-4 rounded-lg shadow">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Friends</h3>
        <ul class="space-y-2">
            <li *ngFor="let friend of friends" (click)="selectFriend(friend.user.id)"
                class="p-2 rounded-lg bg-gray-200 hover:bg-blue-200 cursor-pointer transition text-gray-700">
                {{ friend.user.username }}
            </li>
        </ul>
        <div *ngIf="friends.length === 0" class="text-center text-gray-500 mt-4">
            <p>No friends found. Add some friends to start chatting!</p>
        </div>
    </div>

    <!-- Chat Window -->
    <div class="w-full md:w-3/4 bg-white p-4 rounded-lg shadow flex flex-col">
        <!-- Messages Area -->
        <div class="flex-grow overflow-y-auto space-y-4 border-b pb-4" #scrollableArea>
            <div *ngFor="let msg of chatMessages">
                <div [ngClass]="{
                    'self-end bg-blue-500 text-white': msg.senderId === currentUserId,
                    'self-start bg-gray-200 text-gray-700': msg.senderId !== currentUserId
                }" class="max-w-full break-words p-3 rounded-lg shadow text-sm">
                    {{ msg.content }}
                </div>
            </div>
            <div *ngIf="chatMessages.length === 0" class="text-center text-gray-500 mt-4">
                <p>No messages yet. Say hi!</p>
            </div>
        </div>

        <!-- Message Input -->
        <form (ngSubmit)="sendMessage()" class="mt-4 flex items-center gap-2">
            <input [(ngModel)]="message" name="message" placeholder="Type a message..."
                class="flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:ring focus:ring-blue-300 outline-none text-sm" />
            <button type="submit"
                class="bg-blue-500 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition">
                Send
            </button>
        </form>
    </div>
</div>


<!-- Loading Indicator -->
<div *ngIf="isLoading" class="text-center">
    <p>Loading messages...</p>
</div>

<!-- Error Notification -->
<div *ngIf="errorMessage" class="text-center text-red-500 mt-4">
    <p>{{ errorMessage }}</p>
</div>